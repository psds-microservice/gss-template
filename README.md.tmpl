# {{.Project.K}}

Go service (GORM, PostgreSQL). Generated by [gss](https://github.com/psds-microservice/gss).

Генерация кода из `.proto`: используется репозиторий [psds-microservice/infra](https://github.com/psds-microservice/infra) — добавьте его как submodule в папку `infra/` (см. `infra/README.md`), затем `make proto`. Общие типы: [psds-microservice/helpy](https://github.com/psds-microservice/helpy).

## Setup

1. Copy `.env.example` to `.env` and set DB_*.
2. `make run` or `go run ./cmd/{{.Project.K}} api`.
3. Режимы: `api`, `worker`, `scheduler`, `seeder`, `command` (см. `make help`).

## Proto

- Добавить [psds-microservice/infra](https://github.com/psds-microservice/infra) в `infra/` (submodule или копия файлов). См. `infra/README.md`.
- Положить `.proto` в `pkg/proto/`.
- `make proto` — собрать образ из infra и сгенерировать Go-код в `pkg/gen/`.
- Для общих типов: `go get github.com/psds-microservice/helpy@latest`.

## Migrations и сиды

- **SQL-миграции**: [golang-migrate](https://github.com/golang-migrate/migrate). Файлы в `database/migrations/` в формате `*_name.up.sql` и `*_name.down.sql`. Команды: `make migrate`, `make migrate-create`.
- **Сиды**: SQL-файлы в `database/seeds/` (по порядку имени). Команда: `make seed`. Полная инициализация: `make db-init` (migrate + seed).
- При запуске API автоматически выполняется `MigrateUp` и GORM AutoMigrate.
